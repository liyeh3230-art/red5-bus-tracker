# ğŸš€ å¦‚ä½•ç™¼å¸ƒèˆ‡ä½ˆç½²æ­¤å°ˆæ¡ˆ

é€™å€‹å°ˆæ¡ˆæ˜¯ä¸€å€‹**å–®é å¼ç¶²é æ‡‰ç”¨ç¨‹å¼ (Single Page Application)**ï¼Œå®Œå…¨ç”±å‰ç«¯ HTML/JS çµ„æˆã€‚é€™æ„å‘³è‘—æ‚¨å¯ä»¥éå¸¸è¼•é¬†åœ°å°‡å…¶å…è²»ä½ˆç½²åˆ°ç¶²è·¯ä¸Šã€‚

ä»¥ä¸‹æ˜¯ä¸‰ç¨®æœ€ç°¡å–®çš„å…è²»ä½ˆç½²æ–¹å¼ï¼š

---

## æ–¹æ³•ä¸€ï¼šNetlify Drop (æœ€ç°¡å–®ã€æœ€å¿«)
**é©åˆï¼š** ä¸æƒ³ä½¿ç”¨ Git æˆ–æŒ‡ä»¤ï¼Œåªéœ€æ‹–æ‹‰æª”æ¡ˆå³å¯ä¸Šç·šã€‚

1. æº–å‚™æª”æ¡ˆï¼šç¢ºä¿æ‚¨çš„ `index.html` æª”æ¡ˆå·²å„²å­˜åœ¨é›»è…¦çš„ä¸€å€‹è³‡æ–™å¤¾ä¸­ï¼ˆä¾‹å¦‚å‘½åç‚º `bus-tracker`ï¼‰ã€‚
2. å‰å¾€ [Netlify Drop](https://app.netlify.com/drop)ã€‚
3. å°‡æ‚¨çš„è³‡æ–™å¤¾ **æ‹–æ›³** åˆ°ç¶²é ä¸Šçš„è™›ç·šå€åŸŸä¸­ã€‚
4. ç­‰å¾…å¹¾ç§’é˜ï¼ŒNetlify æœƒè‡ªå‹•ç”¢ç”Ÿä¸€å€‹ç¶²å€ï¼ˆä¾‹å¦‚ `https://agitated-curie-xxxx.netlify.app`ï¼‰ã€‚
5. **å®Œæˆï¼** æ‚¨çš„ç¶²ç«™å·²ç¶“ä¸Šç·šã€‚

---

## æ–¹æ³•äºŒï¼šGitHub Pages (é–‹ç™¼è€…æ¨è–¦)
**é©åˆï¼š** å¦‚æœæ‚¨å·²ç¶“æœ‰ GitHub å¸³è™Ÿï¼Œä¸”å¸Œæœ›æŒçºŒç¶­è­·ç¨‹å¼ç¢¼ã€‚

1. åœ¨ [GitHub](https://github.com) ä¸Šå»ºç«‹ä¸€å€‹æ–°çš„ Repositoryï¼ˆä¾‹å¦‚ `red5-bus-tracker`ï¼‰ã€‚
2. å°‡ `index.html` ä¸Šå‚³åˆ°è©² Repositoryã€‚
3. é€²å…¥ Repository çš„ **Settings (è¨­å®š)** > **Pages**ã€‚
4. åœ¨ **Build and deployment** ä¸‹çš„ **Branch** é¸æ“‡ `main` (æˆ– master) ä¸¦é»æ“Š **Save**ã€‚
5. ç­‰å¾…ç´„ 1-2 åˆ†é˜ï¼Œé‡æ–°æ•´ç†é é¢ï¼Œä¸Šæ–¹æœƒå‡ºç¾æ‚¨çš„ç¶²ç«™ç¶²å€ï¼ˆä¾‹å¦‚ `https://yourname.github.io/red5-bus-tracker/`ï¼‰ã€‚

---

## æ–¹æ³•ä¸‰ï¼šVercel
**é©åˆï¼š** è¿½æ±‚æ¥µè‡´æ•ˆèƒ½èˆ‡å…¨çƒ CDN åŠ é€Ÿã€‚

1. å‰å¾€ [Vercel](https://vercel.com) ä¸¦è¨»å†Š/ç™»å…¥ã€‚
2. é»æ“Š **Add New...** > **Project**ã€‚
3. é€£çµæ‚¨çš„ GitHub Repository (å¦‚æœæ‚¨ç”¨äº†æ–¹æ³•äºŒ)ã€‚
4. æˆ–è€…å®‰è£ Vercel CLI (`npm i -g vercel`)ï¼Œåœ¨å°ˆæ¡ˆè³‡æ–™å¤¾è¼¸å…¥ `vercel` æŒ‡ä»¤å³å¯ç™¼å¸ƒã€‚

---

## ğŸ“‚ æª”æ¡ˆç”¨é€”èªªæ˜ (å¿…è®€!)

æœ¬å°ˆæ¡ˆåŒ…å«ä¸‰å€‹ä¸»è¦æª”æ¡ˆï¼Œè«‹ä¾ç…§ä¸‹åˆ—æŒ‡ç¤ºæ”¾ç½®ï¼š

| æª”æ¡ˆ | ä¸Šå‚³ä½ç½® | èªªæ˜ |
| :--- | :--- | :--- |
| `index.html` | **GitHub** | **ç¶²é ä¸»ç¨‹å¼**ã€‚ä¸Šå‚³å¾Œé€é GitHub Pages ç”¢ç”Ÿç¶²å€ï¼Œä¾›æ‚¨æŸ¥çœ‹å³æ™‚åœ°åœ–ã€‚ |
| `README.md` | **GitHub** | **å°ˆæ¡ˆèªªæ˜æ›¸**ã€‚ä¸Šå‚³å¾Œæœƒåœ¨å„²å­˜åº«é¦–é é¡¯ç¤ºæ•™å­¸æ–‡ä»¶ã€‚ |
| `cloud-tracker.gs` | **Google è©¦ç®—è¡¨** | **é›²ç«¯æ©Ÿå™¨äºº**ã€‚âš ï¸ **è«‹å‹¿åƒ…ä¸Šå‚³è‡³ GitHub**ã€‚æ‚¨å¿…é ˆå°‡æ­¤æª”æ¡ˆå…§å®¹**è¤‡è£½**ä¸¦è²¼ä¸Šè‡³ Google è©¦ç®—è¡¨çš„ Apps Script ç·¨è¼¯å™¨ä¸­ï¼Œæ‰èƒ½é”æˆ 24 å°æ™‚è‡ªå‹•è¨˜éŒ„ã€‚ |

---

## â˜ï¸ é€²éšï¼šå¦‚ä½•é”æˆ 24 å°æ™‚ä¸é–“æ–·é›²ç«¯è¨˜éŒ„ï¼Ÿ

å¦‚æœæ‚¨å¸Œæœ›é›»è…¦é—œæ©Ÿå¾Œï¼Œç³»çµ±ä»èƒ½æŒçºŒè¨˜éŒ„å…¬è»Šè³‡æ–™ä¸¦è¨ˆç®—å¹³å‡æ™‚é–“ï¼Œè«‹ä½¿ç”¨æœ¬å°ˆæ¡ˆæä¾›çš„ **Google Apps Script** è§£æ±ºæ–¹æ¡ˆã€‚é€™å®Œå…¨**å…è²»**ä¸”**ç„¡éœ€ç¶­è­·ä¼ºæœå™¨**ã€‚

### æ­¥é©Ÿ 1ï¼šå»ºç«‹ Google Sheet
1. å‰å¾€ [Google Sheets](https://sheets.new) å»ºç«‹ä¸€å€‹æ–°çš„è©¦ç®—è¡¨ã€‚
2. å°‡è©¦ç®—è¡¨å‘½åç‚ºã€Œç´…5å…¬è»Šè¿½è¹¤è¨˜éŒ„ã€ã€‚

### æ­¥é©Ÿ 2ï¼šå®‰è£è…³æœ¬
1. åœ¨è©¦ç®—è¡¨é¸å–®ä¸­ï¼Œé»é¸ **ã€Œæ“´å……åŠŸèƒ½ã€** > **ã€ŒApps Scriptã€**ã€‚
2. åˆªé™¤ç·¨è¼¯å™¨ä¸­é è¨­çš„ç¨‹å¼ç¢¼ã€‚
3. é–‹å•Ÿæœ¬å°ˆæ¡ˆä¸­çš„ `cloud-tracker.gs` æª”æ¡ˆï¼Œè¤‡è£½æ‰€æœ‰å…§å®¹ï¼Œè²¼ä¸Šåˆ°ç·¨è¼¯å™¨ä¸­ã€‚
4. æŒ‰ä¸‹ä¸Šæ–¹ç£ç‰‡åœ–ç¤ºğŸ’¾å„²å­˜ï¼Œå°ˆæ¡ˆåç¨±å¯å–ç‚ºã€ŒBusTrackerã€ã€‚

### æ­¥é©Ÿ 3ï¼šè¨­å®šè‡ªå‹•åŒ–æ’ç¨‹ (Trigger)
âš ï¸ **è«‹å‹™å¿…ä¾ç…§é †åºé¸æ“‡ï¼Œé¸é …æ‰æœƒå‡ºç¾ï¼š**

1. åœ¨ Apps Script å·¦å´é¸å–®é»æ“Š â° **ã€Œè§¸ç™¼æ¢ä»¶ã€(Triggers)**ã€‚
2. é»æ“Šå³ä¸‹è§’è—è‰²æŒ‰éˆ• **ã€Œæ–°å¢è§¸ç™¼æ¢ä»¶ã€**ã€‚
3. åœ¨è·³å‡ºçš„è¦–çª—ä¸­ä¾åºè¨­å®šï¼š
   - å“ªä¸€å€‹å‡½å¼ï¼š`main`
   - å“ªä¸€å€‹éƒ¨ç½²ä½œæ¥­ï¼š`å‰ç«¯` (Head)
   - **é¸å–æ´»å‹•ä¾†æº**ï¼šé¸æ“‡ **ã€Œæ™‚é–“é©…å‹•ã€** (Time-driven)
   - **é¸å–æ™‚é–“å‹è§¸ç™¼æ¢ä»¶é¡å‹** (é‡è¦!)ï¼šåŸæœ¬å¯èƒ½æ˜¯"å°æ™‚"ï¼Œè«‹æ”¹é¸ **ã€Œåˆ†é˜è¨ˆæ™‚å™¨ã€** (Minutes timer)
   - **é¸å–åˆ†é˜é–“éš”**ï¼šç¾åœ¨æ‚¨å¯ä»¥çœ‹åˆ°ä¸¦é¸æ“‡ **ã€Œæ¯åˆ†é˜ã€** (Every minute)
4. é»æ“Šã€Œå„²å­˜ã€ã€‚
5. Google æœƒè·³å‡ºã€ŒAuthorization requiredã€ï¼Œè«‹é»æ“Š **ã€Œå¯©æŸ¥æ¬Šé™ã€** > é¸æ“‡æ‚¨çš„ Google å¸³è™Ÿ > å·¦ä¸‹è§’çš„ **ã€Œé€²éšã€** > **ã€Œå‰å¾€... (ä¸å®‰å…¨)ã€** > **ã€Œå…è¨±ã€**ã€‚

### âœ… å®Œæˆï¼
ç¾åœ¨ï¼ŒGoogle çš„ä¼ºæœå™¨æœƒæ¯åˆ†é˜è‡ªå‹•åŸ·è¡Œä¸€æ¬¡ç¨‹å¼ï¼Œå¹«æ‚¨è¿½è¹¤ç´…5å…¬è»Šã€‚è³‡æ–™æœƒè‡ªå‹•å¡«å…¥æ‚¨çš„è©¦ç®—è¡¨ä¸­ï¼Œå³ä½¿æ‚¨ç¡è¦ºæ™‚ä¹ŸæœƒæŒçºŒé‹ä½œã€‚

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é …ï¼šCORS ä»£ç†

æœ¬å°ˆæ¡ˆä¾è³´å…¬é–‹çš„ **CORS Proxy æœå‹™** (å¦‚ `corsproxy.io`, `allorigins.win`) ä¾†è®€å–æ”¿åºœçš„ API è³‡æ–™ï¼Œå› ç‚ºæ”¿åºœä¼ºæœå™¨æœªé–‹æ”¾ç›´æ¥çš„å‰ç«¯é€£ç·šæ¬Šé™ã€‚

**åœ¨æ­£å¼ä½ˆç½²ç’°å¢ƒä¸­éœ€æ³¨æ„ï¼š**
1. **ç©©å®šæ€§**ï¼šå…¬é–‹ Proxy æœ‰æ™‚æœƒä¸ç©©å®šæˆ–é™åˆ¶æµé‡ã€‚
2. **å»ºè­°è§£æ³•**ï¼šè‹¥æ‚¨å¸Œæœ›é•·æœŸç©©å®šç‡Ÿé‹ï¼Œå»ºè­°è‡ªè¡Œå»ºç«‹ä¸€å€‹ç°¡å–®çš„å¾Œç«¯è½‰ç™¼æœå‹™ (ä¾‹å¦‚ä½¿ç”¨ Cloudflare Workers æˆ– Vercel Functions)ã€‚

### ä½¿ç”¨ Cloudflare Workers å»ºç«‹ç§æœ‰ Proxy (é€²éš)
å¦‚æœæ‚¨ç™¼ç¾é€£ç·šä¸ç©©ï¼Œå¯ä»¥å»ºç«‹ä¸€å€‹ `worker.js`ï¼š

```javascript
export default {
  async fetch(request) {
    const targetUrl = "https://pda5284.gov.taipei/MQS/SubRouteDyna?csvsubrouteid=10821";
    const response = await fetch(targetUrl);
    const newHeaders = new Headers(response.headers);
    newHeaders.set("Access-Control-Allow-Origin", "*"); // å…è¨±æ‰€æœ‰ä¾†æº
    return new Response(response.body, {
      status: response.status,
      statusText: response.statusText,
      headers: newHeaders
    });
  }
}
```
ç„¶å¾Œå°‡ç¶²é ç¨‹å¼ç¢¼ä¸­çš„ `API_URL` æ”¹ç‚ºæ‚¨ Worker çš„ç¶²å€å³å¯ã€‚
